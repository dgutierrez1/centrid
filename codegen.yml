# GraphQL Code Generator Configuration
# Generates TypeScript types + urql hooks from GraphQL schema

schema:
  - 'https://xennuhfmnucybtyzfgcl.supabase.co/functions/v1/api/graphql':
      headers:
        Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhlbm51aGZtbnVjeWJ0eXpmZ2NsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MTA4MzUyMCwiZXhwIjoyMDc2NjU5NTIwfQ.Ur5mzg-ZUGfIO31-buAzORvEZH-93b5uAJPa2Z6YI7Q'
documents: 'apps/web/src/graphql/**/*.graphql'  # GraphQL query/mutation files
generates:
  # Generate TypeScript types + urql hooks
  apps/web/src/types/graphql.ts:
    plugins:
      - 'typescript'                  # Base TypeScript types
      - 'typescript-operations'       # Query/Mutation types
      - 'typescript-urql'             # urql hooks (useQuery, useMutation) - includes document generation
    config:
      # urql-specific config
      withHooks: true                 # Generate useQuery/useMutation hooks
      withComponent: false            # Don't generate React components

      # Type safety config
      skipTypename: false             # Include __typename in types
      enumsAsTypes: true              # Enums as union types
      constEnums: true                # Use const enums
      futureProofEnums: true          # Future-proof enum values
      immutableTypes: false           # Allow mutations
      useTypeImports: true            # Use import type
      # NOTE: Removed avoidOptionals, maybeValue, inputMaybeValue
      # to preserve three-state semantic (undefined/null/value)

      # Custom scalars
      scalars:
        DateTime: string              # DateTime → string
        Upload: File                  # Upload → File
        JSON: unknown                 # JSON → unknown (safer than any, requires explicit type assertions)
        UUID: string                  # UUID → string (prevents any default)

  # Backend API types (for service layer and testing)
  apps/api/src/types/graphql.ts:
    plugins:
      - 'typescript'                  # Base TypeScript types only (no operations/hooks)
    config:
      # Type safety config
      skipTypename: false             # Include __typename in types
      enumsAsTypes: true              # Enums as union types
      useTypeImports: true            # Use import type

      # Custom scalars (match frontend)
      scalars:
        DateTime: string
        Upload: File
        JSON: unknown
        UUID: string

  # UI Package types (for pure UI components)
  packages/ui/src/types/graphql.ts:
    plugins:
      - 'typescript'                  # Base TypeScript types only
    config:
      # Type safety config
      skipTypename: true              # No __typename for UI
      enumsAsTypes: true              # Enums as union types
      useTypeImports: true            # Use import type
      # NOTE: Removed avoidOptionals, maybeValue to match other targets

      # Custom scalars (match other packages)
      scalars:
        DateTime: string
        Upload: File
        JSON: unknown
        UUID: string
